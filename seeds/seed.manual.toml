# =============================================================================
# MANUAL SEED OVERRIDES
# =============================================================================
# This file contains hand-curated extras and configuration that should NOT be
# overwritten by `just seed`. The seed_generator merges this file into the
# auto-generated seed.toml via the --merge flag.
#
# Sections:
#   [renames]         - Builder name overrides (e.g. LlmAgent -> Agent)
#   [[builders.X.extras]] - Manual extra methods per builder
#   [[manual_exports]] - Extra imports appended to __init__.py
#

# ---------------------------------------------------------------------------
# BUILDER RENAMES
# ---------------------------------------------------------------------------
# Maps ADK class names to friendlier builder names.
[renames]
LlmAgent = "Agent"
SequentialAgent = "Pipeline"
ParallelAgent = "FanOut"
LoopAgent = "Loop"

# ---------------------------------------------------------------------------
# OPTIONAL CONSTRUCTOR ARGS
# ---------------------------------------------------------------------------
# These add optional positional params to __init__:
#   Agent("name", "model") works alongside Agent("name").model("model")

[builders.Agent]
optional_constructor_args = ["model"]

# ---------------------------------------------------------------------------
# AGENT EXTRAS (Phase 1)
# ---------------------------------------------------------------------------

[[builders.Agent.extras]]
name = "guardrail"
signature = "(self, fn: Callable) -> Self"
doc = "Attach a guardrail function as both before_model and after_model callback."
behavior = "dual_callback"
target_fields = ["before_model_callback", "after_model_callback"]

[[builders.Agent.extras]]
name = "ask"
signature = "(self, prompt: str) -> str"
doc = "One-shot execution. Build agent, send prompt, return response text."
behavior = "runtime_helper"
helper_func = "run_one_shot"

[[builders.Agent.extras]]
name = "ask_async"
signature = "(self, prompt: str) -> str"
doc = "Async one-shot execution."
behavior = "runtime_helper_async"
helper_func = "run_one_shot_async"

[[builders.Agent.extras]]
name = "stream"
signature = "(self, prompt: str) -> AsyncIterator[str]"
doc = "Streaming execution. Yields response text chunks."
behavior = "runtime_helper_async_gen"
helper_func = "run_stream"

[[builders.Agent.extras]]
name = "test"
signature = "(self, prompt: str, *, contains: str | None = None, matches: str | None = None, equals: str | None = None) -> Self"
doc = "Run a smoke test. Calls .ask() internally, asserts output matches condition."
behavior = "runtime_helper"
helper_func = "run_inline_test"

[[builders.Agent.extras]]
name = "session"
signature = "(self)"
doc = "Create an interactive session context manager. Use with 'async with'."
behavior = "runtime_helper_ctx"
helper_func = "create_session"

[[builders.Agent.extras]]
name = "map"
signature = "(self, prompts: list[str], *, concurrency: int = 5) -> list[str]"
doc = "Run agent against multiple prompts with bounded concurrency."
behavior = "runtime_helper"
helper_func = "run_map"

[[builders.Agent.extras]]
name = "map_async"
signature = "(self, prompts: list[str], *, concurrency: int = 5) -> list[str]"
doc = "Async batch execution against multiple prompts."
behavior = "runtime_helper_async"
helper_func = "run_map_async"

[[builders.Agent.extras]]
name = "events"
signature = "(self, prompt: str) -> AsyncIterator"
doc = "Stream raw ADK Event objects. Yields every event including state deltas and function calls."
behavior = "runtime_helper_async_gen"
helper_func = "run_events"

